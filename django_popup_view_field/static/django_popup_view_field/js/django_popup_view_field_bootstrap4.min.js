if("undefined"==typeof jQuery)throw new Error("django-popup-view-field - requires jQuery");$(document).ready(function(){var o=function(t,a,i,n,l){var d={url:i,method:n,cache:!1};null!=l&&(d.data=l);var e=$.ajax(d);e.done(function(i){t.find(".modal-body").html(i),function(t,a){var i=t.find(".modal-body");i.find("*").on("click",function(i){var n=null,l=$(this),d=l.data("popup-view-value");if(void 0!==d&&("html()"===d&&(d=l.html())&&(d=d.trim()),n=a.data("target"),target=$("#"+n),i.stopPropagation(),t.modal("hide"),target.val(d)),!0===l.is("a[href]")){var e=l.prop("href");return i.stopPropagation(),o(t,a,e,"GET",null),!1}}),i.find("form").on("submit",function(i){var n=$(this),l=n.attr("method")||"POST",d=n.attr("action")||".",e=n.serialize();return i.stopPropagation(),o(t,a,d,l,e),!1})}(t,a)}),e.fail(function(o){throw t.find(".modal-body").html(gettext("Error on loading data.")),new Error("django-popup-view-field - Ajax request to url: "+i)})},t=function(o){var t=$("#django-popup-view-field-dialog"),a=gettext("Data is loading ..."),i=gettext("Close");if(null!==o)var n=o.data("popup-dialog-title");else n="Modal title";return t.find(".modal-title").html(n),t.find(".modal-body").html(a),t.find(".modal-footer-close").html(i),t};$(".popup-view-btn-load").on("click",function(){var a=$(this),i=function(o){return o.data("url")}(a);$dialog=t(a),$dialog.modal("show"),o($dialog,a,i,"GET",null),$dialog.on("hidden.bs.modal",function(o){$dialog.modal("hide"),t(null)})}),$(".popup-view-btn-clear").on("click",function(){var o=$(this).data("target");$("#"+o).val("")})});
